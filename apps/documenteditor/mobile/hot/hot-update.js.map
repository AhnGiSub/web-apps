{"version":3,"sources":["webpack:///D:/web-apps/apps/documenteditor/mobile/src/controller/Main.jsx","webpack:///D:/web-apps/apps/documenteditor/mobile/src/store/documentInfo.js","webpack:///D:/web-apps/apps/documenteditor/mobile/src/store/mainStore.js"],"names":["MainController","inject","props","script","document","createElement","src","async","onload","dep_scripts","push","sdk_scripts","promise_get_script","scriptpath","Promise","resolve","reject","onerror","body","appendChild","loadConfig","data","me","console","log","editorConfig","Object","assign","config","appOptions","user","Common","Utils","fillUserInfo","lang","loadDocument","permissions","doc","docInfo","_permissions","_user","Asc","asc_CUserInfo","put_Id","id","put_FullName","fullname","asc_CDocInfo","key","put_Url","url","put_Title","title","put_Format","fileType","put_VKey","vkey","put_Options","options","put_UserInfo","put_CallbackUrl","callbackUrl","put_Token","token","put_Permissions","put_EncryptedInfo","encryptionKeys","api","asc_registerCallback","onEditorPermissions","asc_setDocInfo","asc_getEditorPermissions","licenseUrl","customerId","storeDocumentInfo","setDataDoc","params","licType","asc_getLicenseType","canLicense","c_oLicenseResult","Success","SuccessLimit","asc_setViewMode","asc_LoadDocument","Resize","_process_array","array","fn","results","reduce","p","item","then","result","asc_docs_api","mobile","bindEvents","Gateway","on","appReady","Notifications","trigger","EditorApi","get","error","storeDocumentSettings","isPortrait","resetPortrait","w","h","changeDocSize","storeFocusObjects","objects","resetFocusObjects","storeTextSettings","fonts","select","initEditorFonts","font","resetFontName","size","resetFontSize","isBold","resetIsBold","isItalic","resetIsItalic","isUnderline","resetIsUnderline","isStrikeout","resetIsStrikeout","typeBaseline","resetTypeBaseline","type","get_ListType","subtype","get_ListSubType","resetListType","resetBullets","resetNumbers","align","resetParagraphAlign","color","resetTextColor","vc","resetLineSpacing","shd","get_Color","resetBackgroundColor","storeParagraphSettings","styles","initEditorStyles","name","changeParaStyleName","storeTableSettings","templates","initTableTemplates","switchIsLoaded","obj","changeCount","Component","value","isLoaded","get_PageCount","PageCount","get_WordsCount","WordsCount","get_ParagraphCount","ParagraphCount","get_SymbolsCount","SymbolsCount","get_SymbolsWSCount","SymbolsWSCount","dataDoc","observable","action","stores","users","storeUsers","storeShapeSettings","storeChartSettings","storeImageSettings"],"mappings":"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","file":"hot/hot-update.js","sourcesContent":["import React, { Component } from \"react\";\nimport { inject } from \"mobx-react\";\nimport CollaborationController from \"../../../../common/mobile/lib/controller/Collaboration.jsx\";\n\n@inject(\n  \"storeDocumentSettings\",\n  \"storeFocusObjects\",\n  \"storeTextSettings\",\n  \"storeParagraphSettings\",\n  \"storeTableSettings\",\n  \"storeDocumentInfo\"\n)\nclass MainController extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  initSdk() {\n    const script = document.createElement(\"script\");\n    script.src = \"../../../../sdkjs/develop/sdkjs/word/scripts.js\";\n    script.async = true;\n    script.onload = () => {\n      let dep_scripts = [\n        \"../../../vendor/xregexp/xregexp-all-min.js\",\n        \"../../../vendor/sockjs/sockjs.min.js\",\n        \"../../../vendor/jszip/jszip.min.js\",\n        \"../../../vendor/jszip-utils/jszip-utils.min.js\",\n      ];\n      dep_scripts.push(...sdk_scripts);\n\n      const promise_get_script = (scriptpath) => {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement(\"script\");\n          script.src = scriptpath;\n          script.onload = () => {\n            resolve(\"ok\");\n          };\n          script.onerror = () => {\n            reject(\"error\");\n          };\n\n          document.body.appendChild(script);\n        });\n      };\n\n      const loadConfig = (data) => {\n        let me = this;\n        console.log(\"load config\");\n\n        me.editorConfig = Object.assign({}, this.editorConfig, data.config);\n        me.appOptions.user = Common.Utils.fillUserInfo(\n          me.editorConfig.user,\n          me.editorConfig.lang,\n          \"Local.User\" /*me.textAnonymous*/\n        );\n      };\n\n      const loadDocument = (data) => {\n        this.permissions = {};\n        this.document = data.doc;\n\n        let docInfo = {};\n\n        if (data.doc) {\n          this.permissions = Object.assign(\n            this.permissions,\n            data.doc.permissions\n          );\n\n          let _permissions = Object.assign({}, data.doc.permissions),\n            _user = new Asc.asc_CUserInfo();\n          _user.put_Id(this.appOptions.user.id);\n          _user.put_FullName(this.appOptions.user.fullname);\n\n          docInfo = new Asc.asc_CDocInfo();\n          docInfo.put_Id(data.doc.key);\n          docInfo.put_Url(data.doc.url);\n          docInfo.put_Title(data.doc.title);\n          docInfo.put_Format(data.doc.fileType);\n          docInfo.put_VKey(data.doc.vkey);\n          docInfo.put_Options(data.doc.options);\n          docInfo.put_UserInfo(_user);\n          docInfo.put_CallbackUrl(this.editorConfig.callbackUrl);\n          docInfo.put_Token(data.doc.token);\n          docInfo.put_Permissions(_permissions);\n          docInfo.put_EncryptedInfo(this.editorConfig.encryptionKeys);\n\n          // var enable = !this.editorConfig.customization || (this.editorConfig.customization.macros!==false);\n          // docInfo.asc_putIsEnabledMacroses(!!enable);\n          // enable = !this.editorConfig.customization || (this.editorConfig.customization.plugins!==false);\n          // docInfo.asc_putIsEnabledPlugins(!!enable);\n\n          // let type = /^(?:(pdf|djvu|xps))$/.exec(data.doc.fileType);\n          // if (type && typeof type[1] === 'string') {\n          //     this.permissions.edit = this.permissions.review = false;\n          // }\n        }\n\n        this.api.asc_registerCallback(\n          \"asc_onGetEditorPermissions\",\n          onEditorPermissions\n        );\n        // this.api.asc_registerCallback('asc_onLicenseChanged',       _.bind(this.onLicenseChanged, this));\n        // this.api.asc_registerCallback('asc_onRunAutostartMacroses', _.bind(this.onRunAutostartMacroses, this));\n        this.api.asc_setDocInfo(docInfo);\n        this.api.asc_getEditorPermissions(\n          this.editorConfig.licenseUrl,\n          this.editorConfig.customerId\n        );\n\n        // Document Info\n\n        const storeDocumentInfo = this.props.storeDocumentInfo;\n\n        storeDocumentInfo.setDataDoc(data.doc);\n        // Common.SharedSettings.set('document', data.doc);\n\n        // if (data.doc) {\n        //     DE.getController('Toolbar').setDocumentTitle(data.doc.title);\n        //     if (data.doc.info) {\n        //         data.doc.info.author && console.log(\"Obsolete: The 'author' parameter of the document 'info' section is deprecated. Please use 'owner' instead.\");\n        //         data.doc.info.created && console.log(\"Obsolete: The 'created' parameter of the document 'info' section is deprecated. Please use 'uploaded' instead.\");\n        //     }\n        // }\n      };\n\n      const onEditorPermissions = (params) => {\n        let me = this;\n        const licType = params.asc_getLicenseType();\n\n        me.appOptions.canLicense =\n          licType === Asc.c_oLicenseResult.Success ||\n          licType === Asc.c_oLicenseResult.SuccessLimit;\n        // me.appOptions.canEdit         = (me.permissions.edit !== false || me.permissions.review === true) && // can edit or review\n        //     (me.editorConfig.canRequestEditRights || me.editorConfig.mode !== 'view') && // if mode==\"view\" -> canRequestEditRights must be defined\n        //     (!me.appOptions.isReviewOnly || me.appOptions.canLicense) && // if isReviewOnly==true -> canLicense must be true\n        //     me.isSupportEditFeature();\n        // me.appOptions.isEdit          = me.appOptions.canLicense && me.appOptions.canEdit && me.editorConfig.mode !== 'view';\n\n        // me.api.asc_setViewMode(!me.appOptions.isEdit);\n        me.api.asc_setViewMode(false);\n        me.api.asc_LoadDocument();\n        me.api.Resize();\n      };\n\n      const _process_array = (array, fn) => {\n        let results = [];\n        return array.reduce(function (p, item) {\n          return p.then(function () {\n            return fn(item).then(function (data) {\n              results.push(data);\n              return results;\n            });\n          });\n        }, Promise.resolve());\n      };\n\n      _process_array(dep_scripts, promise_get_script).then(\n        (result) => {\n          this.api = new Asc.asc_docs_api({\n            \"id-view\": \"editor_sdk\",\n            mobile: true,\n            // 'translate': translate\n          });\n\n          this.appOptions = {};\n          this.bindEvents();\n\n          Common.Gateway.on(\"init\", loadConfig);\n          // Common.Gateway.on('showmessage',    _.bind(me.onExternalMessage, me));\n          Common.Gateway.on(\"opendocument\", loadDocument);\n          Common.Gateway.appReady();\n\n          Common.Notifications.trigger(\"engineCreated\", this.api);\n          Common.EditorApi = { get: () => this.api };\n        },\n        (error) => {\n          console.log(\"promise failed \" + error);\n        }\n      );\n    };\n\n    script.onerror = () => {\n      console.log(\"error\");\n    };\n\n    document.body.appendChild(script);\n  }\n\n  bindEvents() {\n    const storeDocumentSettings = this.props.storeDocumentSettings;\n    this.api.asc_registerCallback(\"asc_onPageOrient\", (isPortrait) => {\n      storeDocumentSettings.resetPortrait(isPortrait);\n    });\n    this.api.asc_registerCallback(\"asc_onDocSize\", (w, h) => {\n      storeDocumentSettings.changeDocSize(w, h);\n    });\n    const storeFocusObjects = this.props.storeFocusObjects;\n    this.api.asc_registerCallback(\"asc_onFocusObject\", (objects) => {\n      storeFocusObjects.resetFocusObjects(objects);\n    });\n\n    //text settings\n    const storeTextSettings = this.props.storeTextSettings;\n    this.api.asc_registerCallback(\"asc_onInitEditorFonts\", (fonts, select) => {\n      storeTextSettings.initEditorFonts(fonts, select);\n    });\n    this.api.asc_registerCallback(\"asc_onFontFamily\", (font) => {\n      storeTextSettings.resetFontName(font);\n    });\n    this.api.asc_registerCallback(\"asc_onFontSize\", (size) => {\n      storeTextSettings.resetFontSize(size);\n    });\n    this.api.asc_registerCallback(\"asc_onBold\", (isBold) => {\n      storeTextSettings.resetIsBold(isBold);\n    });\n    this.api.asc_registerCallback(\"asc_onItalic\", (isItalic) => {\n      storeTextSettings.resetIsItalic(isItalic);\n    });\n    this.api.asc_registerCallback(\"asc_onUnderline\", (isUnderline) => {\n      storeTextSettings.resetIsUnderline(isUnderline);\n    });\n    this.api.asc_registerCallback(\"asc_onStrikeout\", (isStrikeout) => {\n      storeTextSettings.resetIsStrikeout(isStrikeout);\n    });\n    this.api.asc_registerCallback(\"asc_onVerticalAlign\", (typeBaseline) => {\n      storeTextSettings.resetTypeBaseline(typeBaseline);\n    });\n    this.api.asc_registerCallback(\"asc_onListType\", (data) => {\n      let type = data.get_ListType();\n      let subtype = data.get_ListSubType();\n      storeTextSettings.resetListType(type);\n      switch (type) {\n        case 0:\n          storeTextSettings.resetBullets(subtype);\n          break;\n        case 1:\n          storeTextSettings.resetNumbers(subtype);\n          break;\n      }\n    });\n    this.api.asc_registerCallback(\"asc_onPrAlign\", (align) => {\n      storeTextSettings.resetParagraphAlign(align);\n    });\n    this.api.asc_registerCallback(\"asc_onTextColor\", (color) => {\n      storeTextSettings.resetTextColor(color);\n    });\n    this.api.asc_registerCallback(\"asc_onParaSpacingLine\", (vc) => {\n      storeTextSettings.resetLineSpacing(vc);\n    });\n    this.api.asc_registerCallback(\"asc_onTextShd\", (shd) => {\n      let color = shd.get_Color();\n      storeTextSettings.resetBackgroundColor(color);\n    });\n\n    //paragraph settings\n    const storeParagraphSettings = this.props.storeParagraphSettings;\n    this.api.asc_registerCallback(\"asc_onInitEditorStyles\", (styles) => {\n      storeParagraphSettings.initEditorStyles(styles);\n    });\n    this.api.asc_registerCallback(\"asc_onParaStyleName\", (name) => {\n      storeParagraphSettings.changeParaStyleName(name);\n    });\n\n    //table settings\n    const storeTableSettings = this.props.storeTableSettings;\n    this.api.asc_registerCallback(\"asc_onInitTableTemplates\", (templates) => {\n      storeTableSettings.initTableTemplates(templates);\n    });\n\n    // Document Info\n\n    const storeDocumentInfo = this.props.storeDocumentInfo;\n\n    this.api.asc_registerCallback(\"asc_onGetDocInfoStart\", () => {\n      storeDocumentInfo.switchIsLoaded(false);\n    });\n\n    this.api.asc_registerCallback(\"asc_onGetDocInfoStop\", () => {\n      storeDocumentInfo.switchIsLoaded(true);\n    });\n\n    this.api.asc_registerCallback(\"asc_onDocInfo\", (obj) => {\n      storeDocumentInfo.changeCount(obj);\n    });\n\n    // me.api.asc_registerCallback('asc_onGetDocInfoEnd',      _.bind(me.onApiGetDocInfoEnd, me));\n    // me.api.asc_registerCallback('asc_onDocumentName',       _.bind(me.onApiDocumentName, me));\n  }\n\n  render() {\n    return <CollaborationController />;\n  }\n}\n\nexport default MainController;\n","import { action, observable } from \"mobx\";\r\n\r\nexport class storeDocumentInfo {\r\n  @observable PageCount = 0;\r\n  @observable WordsCount = 0;\r\n  @observable ParagraphCount = 0;\r\n  @observable SymbolsCount = 0;\r\n  @observable SymbolsWSCount = 0;\r\n  @observable isLoaded = false;\r\n  @observable dataDoc = \"\";\r\n\r\n  @action switchIsLoaded(value) {\r\n    this.isLoaded = value;\r\n  }\r\n\r\n  @action changeCount(obj) {\r\n    if (obj) {\r\n      if (obj.get_PageCount() > -1) this.PageCount = obj.get_PageCount();\r\n      if (obj.get_WordsCount() > -1) this.WordsCount = obj.get_WordsCount();\r\n      if (obj.get_ParagraphCount() > -1)\r\n        this.ParagraphCount = obj.get_ParagraphCount();\r\n      if (obj.get_SymbolsCount() > -1)\r\n        this.SymbolsCount = obj.get_SymbolsCount();\r\n      if (obj.get_SymbolsWSCount() > -1)\r\n        this.SymbolsWSCount = obj.get_SymbolsWSCount();\r\n    }\r\n  }\r\n\r\n  @action setDataDoc(obj) {\r\n    this.dataDoc = obj;\r\n  }\r\n}\r\n","import { storeDocumentSettings } from \"./documentSettings\";\nimport { storeFocusObjects } from \"./focusObjects\";\nimport { storeUsers } from \"../../../../common/mobile/lib/store/users\";\nimport { storeTextSettings } from \"./textSettings\";\nimport { storeParagraphSettings } from \"./paragraphSettings\";\nimport { storeShapeSettings } from \"./shapeSettings\";\nimport { storeImageSettings } from \"./imageSettings\";\nimport { storeTableSettings } from \"./tableSettings\";\nimport { storeChartSettings } from \"./chartSettings\";\nimport { storeDocumentInfo } from \"./documentInfo\";\n\nexport const stores = {\n  storeFocusObjects: new storeFocusObjects(),\n  storeDocumentSettings: new storeDocumentSettings(),\n  users: new storeUsers(),\n  storeTextSettings: new storeTextSettings(),\n  storeParagraphSettings: new storeParagraphSettings(),\n  storeShapeSettings: new storeShapeSettings(),\n  storeChartSettings: new storeChartSettings(),\n  storeImageSettings: new storeImageSettings(),\n  storeTableSettings: new storeTableSettings(),\n  storeDocumentInfo: new storeDocumentInfo(),\n};\n"],"sourceRoot":""}